name: Generate Release Notes

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Release Version (e.g., 1.2.3)'
        required: true
        default: '1.0.0'

jobs:
  release-notes:
    runs-on: macos-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Generate changelog
        id: changelog
        uses: metcalfc/changelog-generator@v4.3.1
        with:
          myToken: ${{ secrets.GITHUB_TOKEN }}
          reverse: 'true'

      - name: Create Release
        id: create_release
        uses: softprops/action-gh-release@v2
        with:
          name: Patcher ${{ github.event.inputs.version }}
          tag_name: v${{ github.event.inputs.version }}
          draft: false
          prerelease: false
          token: ${{ secrets.GITHUB_TOKEN }}
          body: |
            This release has been automatically generated by a GitHub Action.

            ## Installation Instructions
            For detailed installation instructions, please refer to the [Wiki](https://github.com/liquidz00/Patcher/wiki#installation) or the [README](https://github.com/liquidz00/Patcher/blob/main/README.md)

            ## Release notes
            ${{ steps.changelog.outputs.changelog }}
